(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5e33dfac","chunk-5dc1085a","chunk-19781d14","chunk-13ae35b4"],{"083a":function(e,t,i){"use strict";i.r(t);var r=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{attrs:{visible:e.visible,title:e.name,width:"800px"},on:{close:e.onClose}},[i("div",{staticClass:"center"},[i("el-transfer",{attrs:{data:e.source,titles:["区域列表",e.name]},model:{value:e.select,callback:function(t){e.select=t},expression:"select"}})],1),i("div",{attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:e.onClose}},[e._v("取 消")]),i("el-button",{attrs:{type:"primary",loading:e.dialogLoading},on:{click:e.onConfirm}},[e._v("确 定")])],1)])},n=[],a=(i("eb62"),{props:{list:Array,data:Array,name:String,visible:Boolean},data:function(){return{select:[],dialogLoading:!1,source:[]}},methods:{onConfirm:function(){this.$emit("confirm",this.select)},onClose:function(){this.$emit("close")},reset:function(){this.dialogLoading=!1}},watch:{visible:function(e){e&&(this.reset(),this.select=this.list.map((function(e){return e.areaId})),this.source=this.data.map((function(e){return{key:e.areaId,label:e.areaName}})))}}}),o=a,l=(i("4b31"),i("4ac2")),s=Object(l["a"])(o,r,n,!1,null,null,null);t["default"]=s.exports},"0c07":function(e,t,i){"use strict";i.r(t);var r=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("d2-container",{staticClass:"page",scopedSlots:e._u([{key:"footer",fn:function(){return[e.total?i("el-pagination",{staticClass:"pagination",attrs:{background:"",layout:"prev, pager, next",total:e.total,"current-page":e.currentPage},on:{"current-change":e.onPageChange}}):e._e()]},proxy:!0}])},[i("template",{slot:"header"},[i("div",{staticClass:"header"},[i("div",{staticClass:"title"},[e._v("快递员管理")]),i("div",{staticClass:"btns"},[i("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:function(t){e.dialogCreateVisible=!0}}},[e._v("创建快递员")]),i("el-button",{attrs:{type:"primary",icon:"el-icon-sort"},on:{click:e.onSync}},[e._v("菜鸟系统同步")]),i("el-button",{attrs:{type:"primary",icon:"el-icon-refresh"},on:{click:e.onIdRefreash}},[e._v("快递员ID比对")])],1)])]),i("div",{staticClass:"box-table"},[i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{"font-size":"15px"},attrs:{size:"mini",data:e.data}},[i("el-table-column",{attrs:{prop:"courierName",label:"快递员",width:"120px"}}),i("el-table-column",{attrs:{prop:"courierPhone",label:"电话",width:"150px"}}),i("el-table-column",{attrs:{prop:"cainiaoEmployeeId",label:"快递员ID",width:"150px"}}),i("el-table-column",{attrs:{label:"调休时间",width:"150px"},scopedSlots:e._u([{key:"default",fn:function(t){return["0001-01-01T00:00:00Z"!=t.row.dayOffEffectStartTime?i("div",{style:{"text-align":"center"}},[e._v(" "+e._s(e._f("timeFormt")(t.row.dayOffEffectStartTime))),i("br"),e._v("至"),i("br"),e._v(" "+e._s(e._f("timeFormt")(t.row.dayOffEffectEndTime))+" ")]):i("div",[e._v("-")])]}}])}),i("el-table-column",{attrs:{label:"分派区域"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("div",[e._v(" "+e._s(t.row.assignedAreas&&t.row.assignedAreas.map((function(e){return e.areaName})).join("，")||"-")+" ")])]}}])}),i("el-table-column",{attrs:{label:"临时区域"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("div",[e._v(" "+e._s(t.row.temporaryAssignedAreas&&t.row.temporaryAssignedAreas.map((function(e){return e.areaName})).join("，")||"-")+" ")])]}}])}),i("el-table-column",{attrs:{label:"自由调配"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("div",[e._v(" "+e._s(t.row.isFlexibility?"是":"否")+" ")])]}}])}),i("el-table-column",{attrs:{fixed:"right",label:"操作",width:"200px"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-row",[i("el-col",{attrs:{span:12}},[i("el-button",{attrs:{type:"text"},on:{click:function(i){return e.handleArea(t.row)}}},[e._v(" 调整分派区域 ")])],1),i("el-col",{attrs:{span:12}},[i("el-button",{attrs:{type:"text"},on:{click:function(i){return e.handleTempArea(t.row)}}},[e._v("调整临时区域 ")])],1)],1),i("el-row",[i("el-col",{attrs:{span:6}},[i("el-button",{attrs:{type:"text"},on:{click:function(i){return e.handleOff(t.row)}}},[e._v("调休")])],1),i("el-col",{attrs:{span:6}},[i("el-button",{attrs:{type:"text"},on:{click:function(i){return e.handleReturn(t.row)}}},[e._v("返岗")])],1),i("el-col",{attrs:{span:6}},[i("el-button",{attrs:{type:"text"},on:{click:function(i){return e.handleUpdate(t.row)}}},[e._v("修改")])],1),i("el-col",{attrs:{span:6}},[i("el-button",{attrs:{type:"text"},on:{click:function(i){return e.handleDelete(t.row)}}},[e._v("删除")])],1)],1)]}}])})],1)],1),i("el-dialog",{attrs:{title:e.currentCourier?""+e.currentCourier.courierName:"创建快递员",visible:e.dialogCreateVisible,width:"500px"},on:{close:e.closeCreateDialog}},[i("el-form",{ref:"createFrom",attrs:{model:e.createForm,"label-position":"left","label-width":"100px",rules:e.rules}},[i("el-form-item",{attrs:{prop:"courierName",label:"快递员名称"}},[i("el-input",{attrs:{placeholder:"请输入快递员名称"},model:{value:e.createForm.courierName,callback:function(t){e.$set(e.createForm,"courierName",t)},expression:"createForm.courierName"}})],1),i("el-form-item",{attrs:{prop:"courierPhone",label:"快递员电话"}},[i("el-input",{attrs:{placeholder:"请输入快递员电话"},model:{value:e.createForm.courierPhone,callback:function(t){e.$set(e.createForm,"courierPhone",t)},expression:"createForm.courierPhone"}})],1),i("el-form-item",{attrs:{label:"自由调配"}},[i("el-switch",{model:{value:e.createForm.isFlexibility,callback:function(t){e.$set(e.createForm,"isFlexibility",t)},expression:"createForm.isFlexibility"}})],1)],1),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:e.closeCreateDialog}},[e._v("取 消")]),i("el-button",{attrs:{type:"primary",loading:e.dialogLoading},on:{click:e.onCreate}},[e._v("确 定")])],1)],1),i("time-pack-dialog",{attrs:{visible:e.timePickVisiable,data:e.currentCourier&&{name:e.currentCourier.courierName,id:e.currentCourier.courierId}||{}},on:{confirm:e.dayoffConfirm,close:e.closeTimePickDialog}}),i("assign-area-dialog",{attrs:{visible:e.assginAreaVisible,data:e.areaList,list:e.currentCourier&&e.currentCourier.assignedAreas||[],name:(e.currentCourier&&e.currentCourier.courierName||"")+"区域分派"},on:{confirm:e.assignConfirm,close:e.closeassignDialog}}),i("assign-area-dialog",{attrs:{visible:e.assginTempAreaVisible,data:e.areaList,list:e.currentCourier&&e.currentCourier.temporaryAssignedAreas||[],name:(e.currentCourier&&e.currentCourier.courierName||"")+"临时区域分派"},on:{confirm:e.assignTempConfirm,close:e.closeassignTempDialog}})],2)},n=[],a=i("99a5"),o=(i("6a61"),i("b1fa"),i("6887")),l=i("365c"),s=i("af5d"),c=i("083a"),u={components:{TimePackDialog:s["default"],"assign-area-dialog":c["default"]},filters:{timeFormt:function(e){return e?Object(o["a"])(e):""}},data:function(){return{total:0,currentPage:1,data:[],loading:!0,dialogLoading:!1,timePickVisiable:!1,fullLoading:null,currentCourier:null,createForm:{courierName:"",courierPhone:"",isFlexibility:!1},rules:{courierName:[{required:!0,message:"请输入快递员名称",trigger:"blur"}],courierPhone:[{required:!0,message:"请输入快递员电话",trigger:"blur"}]},dialogCreateVisible:!1,assginAreaVisible:!1,assginTempAreaVisible:!1,areaList:[]}},mounted:function(){this.refreash()},methods:{onPageChange:function(e){this.currentPage=e,this.refreash()},refreash:function(){var e=this;this.loading=!0,l["a"].COURIER_LIST({offset:10*(this.currentPage-1),limit:10}).then((function(t){console.log(t),e.total=t.count,e.data=t.couriers})).catch((function(e){console.log(e)})).finally((function(){e.loading=!1}))},handleArea:function(e){var t=this;this.showLoadingScreen(this),this.requestAreaList().then((function(i){t.currentCourier=e,t.areaList=i.areas,t.assginAreaVisible=!0})).finally((function(){t.fullLoading&&t.fullLoading.close()}))},assignConfirm:function(e){var t=this;this.showLoadingScreen(this),l["a"].COURIER_ASSIGN_AREA(this.currentCourier.courierId,{areaIds:e}).then((function(e){t.refreash(),t.closeassignDialog()})).finally((function(){t.fullLoading&&t.fullLoading.close()}))},closeassignDialog:function(){this.assginAreaVisible=!1,this.currentCourier=null},handleTempArea:function(e){var t=this;this.showLoadingScreen(this),this.requestAreaList().then((function(i){t.currentCourier=e,t.areaList=i.areas,t.assginTempAreaVisible=!0})).finally((function(){t.fullLoading&&t.fullLoading.close()}))},requestAreaList:function(){return Object(a["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,l["a"].AREA_LIST({offset:-1,limit:-1});case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})))()},assignTempConfirm:function(e){var t=this;this.showLoadingScreen(this),l["a"].COURIER_ASSIGN_TEMP_AREA(this.currentCourier.courierId,{areaIds:e}).then((function(e){t.refreash(),t.closeassignTempDialog()})).finally((function(){t.fullLoading&&t.fullLoading.close()}))},closeassignTempDialog:function(){this.assginTempAreaVisible=!1,this.currentCourier=null},handleOff:function(e){this.currentCourier=e,this.timePickVisiable=!0},handleReturn:function(e){var t=this;this.$confirm("确定".concat(e.courierName,"快递员已返岗？"),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.showLoadingScreen(t),l["a"].COURIER_RETURN(e.courierId).then((function(e){t.refreash()})).finally((function(){t.fullLoading&&t.fullLoading.close()}))}))},handleUpdate:function(e){console.log(e),this.currentCourier=e,this.createForm.courierName=e.courierName,this.createForm.courierPhone=e.courierPhone,this.createForm.isFlexibility=e.isFlexibility,this.dialogCreateVisible=!0},handleDelete:function(e){var t=this;this.$confirm("确定删除".concat(e.courierName,"快递员吗？"),"删除".concat(e.courierName),{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.showLoadingScreen(t),l["a"].COURIER_DELETE(e.courierId).then((function(e){t.refreash()})).finally((function(){t.fullLoading&&t.fullLoading.close()}))}))},onCreate:function(){var e=this;this.$refs.createFrom.validate((function(t){t&&(e.dialogLoading=!0,e.currentCourier?l["a"].COURIER_UPDATE(e.currentCourier.courierId,e.createForm).then((function(t){e.refreash(),e.dialogLoading=!1,e.closeCreateDialog()})).catch((function(t){e.dialogLoading=!1})):l["a"].COURIER_CREATE(e.createForm).then((function(t){e.refreash(),e.dialogLoading=!1,e.closeCreateDialog()})).catch((function(t){e.dialogLoading=!1})))}))},closeCreateDialog:function(){this.currentCourier=null,this.createFrom={},this.$refs.createFrom.resetFields(),this.dialogCreateVisible=!1},dayoffConfirm:function(e){var t=this;e&&2==e.length?l["a"].COURIER_DAYOFF(this.currentCourier.courierId,{dayOffEffectStartTime:e[0].toISOString(),dayOffEffectEndTime:e[1].toISOString()}).then((function(e){t.closeTimePickDialog(),t.refreash()})).finally((function(){t.fullLoading&&t.fullLoading.close()})):this.$message.error("请选择调休时间")},closeTimePickDialog:function(){this.currentCourier=null,this.timePickVisiable=!1},onSync:function(){var e=this;this.showLoadingScreen(this),l["a"].COURIER_SYNC_ID_FROM_SYS().then((function(t){e.refreash()})).finally((function(){e.fullLoading&&e.fullLoading.close()}))},onIdRefreash:function(){var e=this;this.showLoadingScreen(this),l["a"].COURIER_SYNC_ID().then((function(t){e.refreash()})).finally((function(){e.fullLoading&&e.fullLoading.close()}))}}},f=u,d=(i("0ca3"),i("4ac2")),g=Object(d["a"])(f,r,n,!1,null,"0aed3be7",null);t["default"]=g.exports},"0ca3":function(e,t,i){"use strict";i("b369")},"370a":function(e,t,i){},"4b31":function(e,t,i){"use strict";i("604f")},"604f":function(e,t,i){},6887:function(e,t,i){"use strict";i.d(t,"a",(function(){return r}));i("2769"),i("0c98"),i("b1fa"),i("c5ce"),i("a5c9");var r=function(e){if(!e||e.match("0001-01-01T00:00:00Z"))return"-";var t=new Date(e),i=(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),Math.floor((t.getMonth()+3)/3),t.getMilliseconds(),"000".concat(t.getFullYear())),r="0".concat(t.getMonth()+1),n="0".concat(t.getDate()),a="0".concat(t.getHours()),o="0".concat(t.getMinutes());return"".concat(i.substr(i.length-4),"-").concat(r.substr(r.length-2),"-").concat(n.substr(n.length-2)," ").concat(a.substr(a.length-2),":").concat(o.substr(o.length-2)).toString()}},"6fc0":function(e,t,i){"use strict";i.r(t);var r=i("0c07");t["default"]=r["default"]},a436:function(e,t,i){"use strict";i("370a")},af5d:function(e,t,i){"use strict";i.r(t);var r=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{attrs:{visible:e.visible,title:e.name+"的调休"},on:{close:e.onClose}},[i("div",{staticClass:"center"},[i("el-date-picker",{attrs:{type:"datetimerange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.times,callback:function(t){e.times=t},expression:"times"}})],1),i("div",{attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:e.onClose}},[e._v("取 消")]),i("el-button",{attrs:{type:"primary",loading:e.dialogLoading},on:{click:e.onConfirm}},[e._v("确 定")])],1)])},n=[],a=(i("f5bd"),{props:{visible:Boolean,data:Object},data:function(){return{times:[],dialogLoading:!1,name:""}},methods:{onConfirm:function(){this.$emit("confirm",this.times)},onClose:function(){this.$emit("close")},reset:function(){this.times=[],this.dialogLoading=!1}},watch:{visible:function(e){e&&(this.reset(),this.name=this.data.name)}}}),o=a,l=(i("a436"),i("4ac2")),s=Object(l["a"])(o,r,n,!1,null,null,null);t["default"]=s.exports},b369:function(e,t,i){},c5ce:function(e,t,i){"use strict";var r=i("6c39"),n=i("9f69"),a=i("d50e"),o=i("f91c"),l="toString",s=RegExp.prototype,c=s[l],u=a((function(){return"/a/b"!=c.call({source:"a",flags:"b"})})),f=c.name!=l;(u||f)&&r(RegExp.prototype,l,(function(){var e=n(this),t=String(e.source),i=e.flags,r=String(void 0===i&&e instanceof RegExp&&!("flags"in s)?o.call(e):i);return"/"+t+"/"+r}),{unsafe:!0})}}]);